# project one (llvm project) advanced llvm notes
#### start mar 31, 2024

- .exe output is:

```bash
❯ ./bin/ModuleMakerTest 
BC??5b
      0$JY?f????
                Q?L!
                    5
                     !?#?A?I29??
                                ?b?
                                   EB?
                                      Bd2K
22?Hp?!#D??A?d? CF? ?22?*(*?1|?\? ??? 
"f?B??RB?ɐq?PH
	&C?B2&
?#?d `!
Esb1????f=?C8?ÌB?yxs?q
                      ???3
                          B??Ρf0=?C8??=?C=?=?x?tpyH?ppzpvx?p ????0n0???P3??!?!?af0?;??;?C9?<??<?;??v`{h7h?rh7??p??p`v(v?vx?w???q?r??y??,???????0bȡ?̡??a?!ā?a֐C9?C9?C9?C9??8?C8?;??/??<??;?;??
    ?i?pX?rp?thx`?t?t???S??P??@? ?P3 (???A?!܁?????fQ8?C:??;?P$v`{h7`?wxx?QL???P3j?a?!??~??!?aT??8??;?C=?C9??<?C;??;?Ì?
?y??w?z(r??\????P?0#??A?????fH;??=???8?C9??<??9??;?<?H?v`?qX????`??? ?0? ?Pn?0?0?????P?0#??a???!?!?!?!?!f ?;?C=?9??9?X?ppwxzH?wp????0???@??0?s?w?_??pp?t??tЇr???A9??8?C=?C9?@Ġʡ?A??f$c0???0?@?0C!?usH?_??|??r???<??<??8?C:??;?Ì?
                                         H!Ba?!??R??-

?A???!?!??4?`?P? ?@? ?P????y(?p`vx?z(rXp??8?;??=??k?!??? ?a? ??aС?a?a?? ?P?
                                                                            ?usH??8??;?C9??9??;?C9?=?;??<??;?;?=??<?C8??a A,?"('?A86???L?x?a??
q 2"??]
       ?main17.0.6test%
```

next steps:
- examine these notes for possible solutions:

```
The code you provided compiles and links successfully, but the output is gibberish because you're writing the LLVM module to standard output (outs()) instead of a file. Here's how to fix it and understand the output better:

Fix for Writing to a File:

Include fstream: Add #include <fstream> at the beginning of your code to work with files.

Create an Output Stream: Replace WriteBitcodeToFile(*M, outs()) with:

C++
std::error_code EC;
raw_fd_ostream OutFile("ModuleMakerTest.bc", EC, sys::fs::open_flags::OF_CREAT | sys::fs::open_flags::OF_WRONLY);

// Check for errors
if (EC) {
    llvm::errs() << "Error opening file: " << EC.message() << '\n';
    return 1;
}

WriteBitcodeToFile(*M, OutFile);
Use code with caution.
This code opens a file named "ModuleMakerTest.bc" for writing and writes the bitcode representation of your module to it.

Understanding the Output:

The gibberish output you see when writing to outs() is the actual bitcode representation of your LLVM module. It's not human-readable by default.

Alternative: Using opt for Analysis:

Instead of writing the bitcode to a file, you can use the opt tool from the LLVM installation to analyze or optimize your module:

opt -S src/ModuleMakerTest.cpp -o ModuleMakerTest.ll
This command runs the opt tool on your source code (src/ModuleMakerTest.cpp) and generates an assembly-like representation of the module in a file named "ModuleMakerTest.ll". This output is still not human-readable in its entirety, but it might be easier to understand than the raw bitcode.

Additional Tips:

Consider using a debugger to step through your code and inspect the values of variables like M to verify that the module is being created correctly before writing it to a file.
Refer to the LLVM documentation on WriteBitcodeToFile for more details and alternative ways to write the module (https://llvm.org/docs/BitCodeFormat.html).
Explore LLVM's tools like lli for interpreting the bitcode and running the generated code.
```
